We're proud to announce the new bug fix release of darktable, 4.2.1!

The github release is here: [https://github.com/darktable-org/darktable/releases/tag/release-4.2.1](https://github.com/darktable-org/darktable/releases/tag/release-4.2.1).

As always, please don't use the autogenerated tarball provided by
github, but only our tar.xz file. The checksums are:

```
$ sha256sum darktable-4.2.1.tar.xz
??? darktable-4.2.1.tar.xz
$ sha256sum darktable-4.2.1.dmg
??? darktable-4.2.1.dmg
$ sha256sum darktable-4.2.1.exe
??? darktable-4.2.1.exe
```

When updating from the stable 4.0.x series, please bear in
mind that your edits will be preserved during this process, but the new
library and configuration will no longer be usable with 4.0.x.

You are strongly advised to take a backup first.

#### Important note: to make sure that darktable can keep on supporting the raw file format for your camera, *please* read [this post](https://discuss.pixls.us/t/raw-samples-wanted/5420?u=lebedevri) on how/what raw samples you can contribute to ensure that we have the *full* raw sample set for your camera under CC0 license!

Since darktable 4.2.0:

- Almost ??? commits to darktable+rawspeed
- ??? pull requests handled
- ?? issues closed

## The Big Ones


## Other Changes

- JPEG files are identified using magic bytes instead of filename
  extension.

- Allow having shortcuts for quick access styles and presets.

- Add Sigmoid collapsible section to hide by default the controls that
  are not to be changed in standard condition.

- Some minor modifications on the overlays of culling view to make
  them less intrusive.

## Bug Fixes

- Fix possible bad pinned memory transfer on OpenCL.

- Fix bug in date-time sanitization function breaking some import time
  stamps.

- Fix toast messages containing %.

- Fix collect module using exclude rules when first filter is empty.

- Fix RGB curve histogram display when compensate middle grey is set.

- Fix possible infinite loop when a module fails to load.

- Properly honor histogram hiding when restarting.

- Fix darktable-chart crash due to a double free.

- Fix Y0 mask calculations for demosaic module.

- Avoid using fscanf() for loading configuration to avoid broken Windows
  implementation.

- Add RYB vectorscope's option in darktable configuration file to
  ensure proper histogram view setting on startup.

- Ensure that wide popup are properly displayed on the same display as
  the widget.

- Fix possible crash in camera tethering.

- Make yes/no buttons in dialogues to respond to standard shortcuts alt+y
  and alt+n.

- Fix preferences sanitization which was completely un-effective due to
  wrong loading order.

- Add Sigmoid documentation link to the online manual.

- Fix color calibration tooltip on expander.

- Fix hief bit depth computation by using libheif corresponding function.

- Fix snapshot invalidation which was too pessimistic and made
  switching snapshots slow.

- Fix some messages in LUT module.

## Lua

- N/A

## Notes

- N/A

## Changed Dependencies

- Minimal CMake version bumped to 3.18.

- Relax libavif dependency to allow 0.9.1 to be used.

- Bump LibRaw version to 0.21.0.

  For systems providing LibRaw 0.21.0 or newer, it is now possible to
  disable building the bundled copy by defining
  -DDONT_USE_INTERNAL_LIBRAW=ON

### Mandatory

- N/A

### Optional

- N/A


## RawSpeed changes


## Camera support, compared to 4.0

### Base Support

-

### White Balance Presets

-

### Noise Profiles


### Missing Compression Mode Support

- Fujifilm "non-lossless"/lossy
- Nikon HE
- Sony lossless

### Suspended Support

No samples on raw.pixls.us

- Creo/Leaf Aptus 22(LF3779)/Hasselblad H1
- Fujifilm FinePix S9600fd
- Fujifilm IS-1
- GoPro FUSION
- Kodak EasyShare Z980
- Leaf Aptus-II 5(LI300059)/Mamiya 645 AFD
- Leaf Credo 60
- Leaf Credo 80
- Minolta DiMAGE 5
- Olympus SP320
- Panasonic DMC-FX150
- Pentax Q10
- Phase One IQ250
- Samsung GX10
- Samsung GX20
- Samsung EK-GN120
- Samsung SM-G920F
- Samsung SM-G935F
- Sinar Hy6/ Sinarback eXact
- ST Micro STV680

## Translations

- German
- European Spanish
- Finnish
- French
- Hungarian
- Italian
- Japanese
- Dutch
- Polish
- Brazilian Portuguese
- Russian
- Slovenian
- Albanian
- Turkish (New)
- Ukrainian
- Chinese - Taiwan
