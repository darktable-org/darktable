We're proud to announce the new feature release of darktable, 4.6.0!

The github release is here: [https://github.com/darktable-org/darktable/releases/tag/release-4.6.0](https://github.com/darktable-org/darktable/releases/tag/release-4.6.0).

As always, please don't use the autogenerated tarball provided by
github, but only our tar.xz file. The checksums are:

```
$ sha256sum darktable-4.6.0.tar.xz
??? darktable-4.6.0.tar.xz
$ sha256sum darktable-4.6.0-x86_64.dmg
??? darktable-4.6.0-x86_64.dmg
$ sha256sum darktable-4.6.0-arm64.dmg
??? darktable-4.6.0-arm64.dmg
$ sha256sum darktable-4.6.0-win64.exe
??? darktable-4.6.0.exe
```

When updating from the stable 4.2.x series, please bear in
mind that your edits will be preserved during this process, but the new
library and configuration will no longer be usable with 4.2.x.

You are strongly advised to take a backup first.

#### Important note: to make sure that darktable can keep on supporting the raw file format for your camera, *please* read [this post](https://discuss.pixls.us/t/raw-samples-wanted/5420?u=lebedevri) on how/what raw samples you can contribute to ensure that we have the *full* raw sample set for your camera under CC0 license!

Since darktable 4.4:

- ?? commits to darktable+rawspeed
- ?? pull requests handled
- ?? issues closed


_Please note that the darktable documentation is not currently complete for release 4.6
and contributions are greatly appreciated. Please see the
[project documentation](https://github.com/darktable-org/dtdocs#contributing)
for more information on how to contribute._

## The Big Ones

The following is a summary of the main features added to darktable
4.6. Please see the user manual for more details of the individual
changes (where available).

- While editing images the history is periodically saved. This is done
  every 10 seconds by default. The interval can be changed via the
  preferences or fully disabled if the interval is set to 0.

## Performance Improvements

One of the major highlights of this release is the number of performance
improvements and enhancements:

## Performance Improvements

- Initialise OpenCL in the background. Especially under Windows this
  can take a long time (>1 minute) when the OpenCL modules need to be
  (re)compiled, at first run or after driver updates. Nothing used to
  happen during that time, making it look like darktable failed to
  start. Now the UI comes up and reports progress in toast
  messages. Until OpenCL is fully available processing will be slower.

## Other Changes

- Hotpixels module now also supports monochrome images.

- Retouch module do not need the internal guide widget, so it has been
  removed.

- Allow import session to be canceled by clicking on the cross in the
  progress bar on bottom left.

- Add support for auto orientation when importing AVIF/HEIF images
  (requires at least libavif 0.9.2 and/or libheif 1.16.0).

- Tune CA correct module performances (gain about 10% on CPU).

- Rastermasks are visualized the same way as other masks in the module
  header and via the mask visualize button.

- A manually controlled vignette correction has been added tot the
  lens module.

- Always show the full uncropped image with cropping rectangle as a
  marker while working in liquify and retouch modules.

- Add linear ProPhoto RGB as possible LUT color-space.

- A set of changes done on OpenCL support:

  - Removed the benchmarking code from opencl as it didn't produce valid
    results on today's computers.

  - Removed the preference option to select pinned memory transfer. Can
    be selected on a per device basis.

  - Usage of "headroom" is selectable in preferences, the default has
    been increased to 600Mb as more systems use graphics memory
    nowadays.

  - Introduce selection of wanted OpenCL drivers in preferences.

- Add Display P3 built-in color profile for input, output, display,
  working and soft-proofing.

- The highlights module is now made available for all non-raw files.

- The speed of scrolling through the filmstrip can be increased by
  holding <kbd>shift</kbd>; you will move by half of the visible
  images at a time. Holding <kbd>ctrl</kbd> while scrolling changes
  the number of images shown ("zooms") and thereby the shift speed.

## Bug Fixes

- Fixes OpenCL platform checking which could lead to a freeze of
  darktable.

- Fix the calculation of resizable widgets based on linesize of
  contents.

- Fixed a bug in the collection filter module where the conjunction of
  multiple filters were not handled properly.

- Fix focus distance detection for Nikon Z mount lens corrections.

- Fixed wrong cropping of sensor data for sraw dng files.

- Apply the Lr color matrix only when importing a genuine Lr XMP.

- Fix a crash when increasing the number of recent collections.

## Lua

### API Version

- API version is now 9.2.0

### Add action support for Lua


### Other Lua changes

- Allow access to image change_timestamp.

## Notes

- When exporting to AVIF, EXR, JPEG XL, or XCF, selecting specific
  metadata (e.g. geo tag or creator) is not currently possible. For
  AVIF, EXR, JPEG XL, and XCF formats, darktable will not include any
  metadata fields unless the user selects all of the checkboxes in the
  export preference options.

- In order to support the correct display of numbers in darktable, the
  minimum supported Gtk version has had to be increased to
  3.24.15. For people who need to build darktable with an older
  version, this can be achieved by removing line 241 of the
  `darktable.css` file on your system. See
  https://github.com/darktable-org/darktable/issues/13166.

- Starting with release 4.4 a new support policy regarding macOS
  versions has been put in place -- darktable releases will now only
  support those macOS versions that are also supported by Apple.
  Release 4.6 therefore drops support for macOS versions older than
  11.3.

## Changed Dependencies

### Mandatory

- ???

### Optional

- Bump libavif to 0.9.2

## RawSpeed changes


## Camera support, compared to 4.2

### Base Support


### White Balance Presets


### Noise Profiles


### Missing Compression Mode Support

- Apple ProRAW DNGs
- CinemaDNG lossless (Blackmagic, DJI, etc.)
- Fujifilm lossy RAFs
- Nikon high efficiency NEFs
- Samsung Expert RAW DNGs
- Sony downsized lossless ARWs ("M" for full-frame, "S" for full-frame & APS-C)

### Suspended Support

Support for the following cameras is suspended because no samples
are available on raw.pixls.us:

- Creo/Leaf Aptus 22(LF3779)/Hasselblad H1
- Fujifilm FinePix S9600fd
- Fujifilm IS-1
- GoPro FUSION
- Kodak EasyShare Z980
- Leaf Aptus-II 5(LI300059)/Mamiya 645 AFD
- Leaf Credo 60
- Leaf Credo 80
- Minolta DiMAGE 5
- Olympus SP320
- Panasonic DMC-FX150
- Pentax Q10
- Phase One IQ250
- Samsung EK-GN120
- Sinar Hy6/ Sinarback eXact
- ST Micro STV680

## Translations

- ???
