We're proud to announce the new feature release of darktable, 3.2.0!

The github release is here: [https://github.com/darktable-org/darktable/releases/tag/release-3.2.0](https://github.com/darktable-org/darktable/releases/tag/release-3.2.0).

As always, please don't use the autogenerated tarball provided by
github, but only our tar.xz. the checksums are:

```
$ sha256sum darktable-3.2.0.tar.xz
??? darktable-3.2.0.tar.xz
$ sha256sum darktable-3.0.0.dmg
??? darktable-3.2.0.dmg
$ sha256sum darktable-3.0.0.exe
??? darktable-3.2.0.exe
```

When updating from the currently stable 3.0.x series, please bear in
mind that your edits will be preserved during this process, but the new
library and configuration will not be usable with 3.0.x any more, so
making a backup is strongly advised.

#### Important note: to make sure that darktable can keep on supporting the raw file format for your camera, *please* read [this post](https://discuss.pixls.us/t/raw-samples-wanted/5420?u=lebedevri) on how/what raw samples you can contribute to ensure that we have the *full* raw sample set for your camera under CC0 license!

- Almost x thousand commits to darktable+rawspeed since 3.0
- xxx pull requests handled
- xx issues closed
- Updated user manual is coming soon™

## The Big Ones

- A new color assessment mode is introduced into the darkroom. This
  mode is designed to ensure proper color perception based on
  ICC recommended (ISO 12646:2008) colour proofing conditions.

- It is now possible to resize the left and right panels directly with
  the mouse. The positions of each one is remembered for each views'
  layout.

- Add a focus peaking mode in the lighttable and darkroom. The default
  key to toggle this mode is <kbd>Ctrl+Shift+F</kbd>

- The wavelet denoise profile has a new Y0U0V0 mode. This new mode
  makes it possible to denoise the chroma and luma noise in a single
  instance.

- A full rewrite of of lighttable has been done. This gives again a
  big performance jump and will allow smooth interaction for any
  screen resolution. At the same time the filmstrip has been reworked.

  It is important to note that this speed improvement is really
  noticeable in the zoomable lighttable view.

  The culling view has also been rewritten from scratch.

- A complete overhaul of the CSS has also been done. This gives darktable
  a very professional look at this time.

- The preference dialog has been fully reviewed and reorganized to propose
  a better look and at the same time requiring less scrolling. It is also
  possible to add some CSS rules directly into the preference dialog to
  tweak darktable's look.

- The new module negadoctor has been added to help inverting negative
  films.

- A new histogram display called RGB Parade has been added.

- The metadata feature has been turned generic internally and has got new
  features. The user can now select the information he wants to see in the
  metadata editor. This selection is automatically mirrored in collection
  and image information modules.

  Along with a new "notes" field, all the fields are multiline
  <kbd>Ctrl+Enter</kbd>, sizable <kbd>Ctrl+Scroll</kbd> and can be set
  as private (not exported). Metadata collection filters have an entry
  "not defined". At import time it is possible to avoid to import
  some metadata.

- Image change detection has been made more reliable. This affects lighttable
  thumbnails change symbol and history collection filter.
  In darkroom navigation, this avoids to recalculate an image and save the xmp
  file when there is no change.

## New Features And Changes

- Add darkroom loading screen.

- Make modules labels a bit smaller for better UI consistency.

- Add small rectangle around the angle display when using the
  straightening tool for better readability.

- Ensure the different views layout are recorded. Many views (and mode
  like lighttable's culling or darkroom's color assessment), can have
  the filmstrip or timeline bottom widgets, we record the exact layout
  for each layout.

- Add tool tips on module in history.

- Add support for applying back the last added key-word with a simple
  key short-cut. Default short-cut is <kbd>Alt+T</kbd>.

- Add wide-gamut HLG/PQ based color space P3 and Rec2020.

- Add custom borders support in framing module.

- Add standard variables support in watermark module.

- Allow the same short-cuts to be defined by different modules. This
  makes it possible to have the filmstrip using the same short-cuts to
  set stars than the lighttable.

- Add log editing support for the L, R, G, B, C, g blending modes.
  This gives more control on the dark pixels.

- Define many new accels for most of the sliders to allow more control
  using the keyboard.

- Add support for curved gradients. The gradient mask can now be
  curved to revert fish-eye kind distortion and so become a straight
  line on the horizon for example.

- Add support for AVIF file format.

- The images operations modules has been extended to support coping,
  replacing and merging metadata.

- Better visibility for the zoomed image part in the navigation widget.

- Revert to smooth mode (was default in 2.6) in color zone module.

- Collect module has two new filters: module and module order.

- It is now possible to resize the collect module windows with
  <kbd>Ctrl+Scroll</kbd>.

- Add support for compressed Lut (.gmz) in the 3D Lut module.

- Use a more natural folder order in the collect module, the latest
  folder are now listed first.

- A full rewrite of the pipe ordering has been done. It is now
  possible to change the order of the pipe using a new module giving
  access to the legacy order (order used up to 2.6 releases) and the
  v3.0 order introduced with darktable 3.0 on Dec 2019. It is also
  possible to create order presets which can be freely applied.

  Note that the copy / paste of multi-instances when they have been
  reordered in a way that some other modules are separating them will
  not keep the same order. This was buggy in previous implementation
  when the target image had also been reordered in a non compatible
  manner or using a different pipe order. In this new versions all the
  multi-instances will be grouped together keeping their relative
  order.

  Note that this work has mainly been done to make the implementation
  simpler, safer and that will require less maintenance. Also as this
  implementation records the full pipe order for history and styles it
  will be the ground for proposing different strategies when applying
  styles.

- The retouch module has a new accel "show or hide shapes" which can
  be mapped to a key for quickly show or hide shapes.

- The spot removal module accel to show-hide shapes has been renamed
  to "show or hide shapes" for clarity and to be consistent with
  the new accel in the retouch module.

- It is possible to change the color of all overlays (shapes, guides,
  etc). This may come handy on some images where the gray guides where
  barely visible.

- In crop & rotate module, the pan movements can be restricted
  vertically or horizontally using the <kbd>Shift</kbd> or
  <kbd>Control</kbd> respectively.

- The crop & rotate module now allows format ratios to be entered as
  a float number.

- When using a snapshot view, a flag to clearly show the position of the
  snapshot has been added.

- Improve the falloff and radius of the vignette to 200% for better
  control.

- Add a user-defined mode in the white-balance module to keep the last
  modification of the module. It is then possible to go back to the
  last modified setting after selecting another mode like spot.

- Dynamic accelerators have been added for combo-boxes making it
  possible to select next and previous values directly from the
  keyboard.

- It is now possible to adjust the color picker areas just after
  having created them. This is achieved by dragging one of the 4
  little square handles at the corner.

- Tagging improvements. Entry tag(s) creation works now without image selected.
  It is allowed to create a tag on virtual node, to insert a pipe <kbd>|</kbd>
  character in create tag (menu). The tree display shows the newly created tags.

- New variables $(LENS), $(EXIF_EXPOSURE_BIAS), $(VERSION_NAME) and
  $(VERSION_IF_MULTI) have been defined. $(CATEGORYn(category)) works now when
  multiple values on the same image (for example people) and accepts
  9 levels instead of 3 (for n).

- Four new timestamps are now supported to store the import,
  last export, last change and last print times.

- Multiple images drag & drop works now on map view.

## Bug fixes

- All valid Lut files are displayed in file selector.

- Fix straightening in crop and rotate module when flip is applied.

- The ellipse and gradient masks can now be manipulated when the
  crop and rotate flip is activated.

- Fix style editing from lighttable. The modules list was empty due to
  an error in SQL statement.

- Make clicking on group icon easier. The active zone around the group
  icon was too small.

- Make sure no more than 64 spots are added in spot removal module and
  display a message when the limit is reached.

- Delay histogram display until the image is fully loaded and so the
  corresponding histogram is ready. Darktable was displaying the
  previously computed histogram for a short period of time.

- Properly update the XMP when doing undo/redo actions.

- Fix discrepancies between the SSE/OpenCL local Laplacian code paths.

- Better performance when using masks.

- Better performance for tone equalizer's guided filter.

- Exports should now better respect the final dimensions requested.

- Fix issues with brush opacity handling.

- Better performance for computing the aspect ratio.

- Fix importing of duplicates on Windows.

- Fix exporting private tags issue with different settings along the path.

- Better visibility of tone curve grid on Grey theme.

- Better accuracy for the keystone OSD lines.

- Better performance and accuracy improvements for the waveform histogram.

- Some HiDPI fixes in icons.

- The Facebook, Google Photo and Flickr export storage have been
  removed as not supported anymore due to deep changes in the provider
  making it very hard to fix.

- Fix brush OSD when in zoom mode. The brushes are now keeping thin
  lines.

- Fix watermark blurring when using rotation.

- Fix watermark crash when no text selected.

- Fix using quote and double quote in meta-data.

- Fix time-line display reporting 61 minutes per hour.

- Smoother transition for gradient shapes.

- Fix the snapshot rotation which could go 180° in a single click.

## Lua

- API changed to 6.0.0 

- facebook, flickr, and picasa removed from types.dt_imageio_storage_module_t.

- piwigo added to type.dt_imageio_storage_module_t.

- notes and version_name metadata fields added to types.dt_lua_image_t data type.

- Added 4 new properties to dt_collection_properties_t, 
  DT_COLLECTION_PROP_IMPORT_TIMESTAMP, DT_COLLECTION_PROP_CHANGE_TIMESTAMP,
  DT_COLLECTION_PROP_EXPORT_TIMESTAMP, DT_COLLECTION_PROP_PRINT_TIMESTAMP

- added darktable.gui.panel_get_size and darktable.gui.panel_set_size functions 
  to set the width of the  left or right panels and the height of the bottom panel.

- fixed is_password field of entry widget to work according to the API manual, so 
  now when it is set to true the field is hidden.

- Added function darktable.gui.views.lighttable.is_image_visible to check if an image 
  is visible in lighttable view.

- Added function darktable.gui.views.lighttable.set_image_visible to force an 
  image to be visible in lighttable view.

- Added a lua scripts installer to the default luarc
  
## Changed Dependencies


## RawSpeed changes


### Changed Dependencies


### Changes


## Camera support, compared to 3.0.0


### Base Support


### White Balance Presets


### Noise Profiles


## Translations

- Catalan
- Czech
- Danish
- German
- European Spanish
- French
- Hebrew
- Hungarian
- Italian
- Japanese
- Norwegian Bokmål
- Dutch
- Polish
- Russian
- Slovenian
