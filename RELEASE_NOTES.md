We're proud to announce the new feature release of darktable, 5.0.0!

The github release is here: [https://github.com/darktable-org/darktable/releases/tag/release-5.0.0](https://github.com/darktable-org/darktable/releases/tag/release-5.0.0).

To build from source, do not use the autogenerated tarball provided by GitHub on the release page, download our tar.xz file instead. If you're just building for yourself without creating a package for some distribution, then using source code cloning in git is an even more convenient way.

The checksums are:

```
$ sha256sum darktable-5.0.0.tar.xz
??? darktable-5.0.0.tar.xz
$ sha256sum darktable-5.0.0-x86_64.dmg
??? darktable-5.0.0-x86_64.dmg
$ sha256sum darktable-5.0.0-arm64.dmg
??? darktable-5.0.0-arm64.dmg
$ sha256sum darktable-5.0.0-win64.exe
??? darktable-5.0.0-win64.exe
```

When updating from the stable 4.8 series, please bear in mind that your edits will be preserved during this process, but the new library and configuration will no longer be usable with 4.8.

You are strongly advised to take a backup first.

#### Important note: to make sure that darktable can keep on supporting the raw file format for your camera, *please* read [this post](https://discuss.pixls.us/t/raw-samples-wanted/5420?u=lebedevri) on how/what raw samples you can contribute to ensure that we have the *full* raw sample set for your camera under CC0 license!

Since darktable 4.8:

- ??? commits to darktable+rawspeed
- ??? pull requests handled
- ??? issues closed


_Please note that the darktable documentation is not currently complete for release 5.0
and contributions are greatly appreciated. Please see the
[project documentation](https://github.com/darktable-org/dtdocs#contributing)
for more information on how to contribute._

## The Big Ones

The following is a summary of the main features added to darktable
5.0. Please see the user manual for more details of the individual
changes (where available).

- This development cycle has included a large number of changes which
  improve the user experience, as detailed in the next section.

## UI/UX Improvements

- Added camera-specific styles for more than 500 camera models to more
  closely approximate the out-of-camera JPEG rendition.  These styles
  only affect contrast, brightness, and saturation and do not attempt
  to match sharpening, denoising, or hue shifts.  Also added a Lua
  script to auto-apply the appropriate style on import and manually
  apply styles to a collection of previously-imported images.

- The user interface now gives feedback while processing bulk image
  operations such as rating, tagging, applying styles, and edit
  history management (and undoing those operations), rather than
  silently freezing until the operation completes.  While the
  operation is in progress, darktable will now show either a busy
  cursor (such as a stopwatch or spinner) or a progress bar with
  option to cancel the remainder of the operation.

- Paths for drawn masks now display two BÃ©zier handles per control point,
  which can be moved individually. This allows for more precise control
  of the paths.

- Added a high-contrast theme with bright white text on a dark gray
  background.

- Enhanced tooltips for utility module headers to provide more
  information about the module.

- Added more new-user hints on an empty lighttable.

- Added two new error placeholder images to distinguish between
  missing, unsupported, and corrupted images.  When attempting to edit
  such an image, an appropriate, more specific error message is
  displayed.

- When selecting a style in the export module, hovering on the style
  name in the popup menu displays a thumbnail previewing the effect of
  appending the style to the active image's edit (first selected image
  in lighttable, center-view image in darkroom).

- Allow for selecting the utility modules to be displayed on the
  panels in the different views.

  - Right-click on the empty panel area below the modules to get a
    menu where they can be hidden or shown. This allows additional
    modules to be added to the darkroom, like metadata editor and
    styles.

  - This replaces the options in the "collections" and "recently used
    collections" modules' preferences to show or hide the latter and
    show a "history" button in the former instead. Users that want the
    separate module will need to reenable it once via the new
    <kbd>Right-click</kbd> menu.

  - The menu also contains an option "restore defaults" that resets
    the selection and position of modules in the current view. In the
    preferences dialog, on the general tab, there's a "reset view
    panels" button that resets all views, including visibility and
    width of the panels themselves.

- Added a global preference to swap the left and right side panels in
  the darkroom view.

- The first time a new user presses Tab, they will be warned that this
  will hide all panels and how to get them back. Hopefully this
  prevents some confusion or frustration.

- Drag&drop utility module headers to reposition them across the left
  and right panels (lighttable) as well as vertically (all
  views). Hold <kbd>Ctrl+Shift</kbd> to avoid expanding/collapsing
  them before dragging. Each view can have a different layout.

- Drag&drop of processing modules in the darkroom right panel has been
  improved to auto-scroll when reaching the top or bottom and to not
  get confused when images get dragged into the area.

- Improved the message displayed at startup when the database is
  locked by another instance of darktable.

## Performance Improvements

- Added OpenCL implementation of color equalizer.

- Improved the speed of bulk image operations by improving the speed
  of sidecar writes, and by moving sidecar updates for many operations
  into a background task, allowing the user to proceed before the
  writes complete.

## Other Changes

- Switched default scope for new installations from histogram to
  waveform to display more detailed information about image color and
  tonality.

- The ISO 12646 color assessment condition is kept until unset by user
  action.

- Exposure bias can now be used to form collections and as a display filter.

- Improved visualization of the color equalizer's effect.

- Improved debugging support for verifying CPU vs. GPU results.

- Add Calibrite alias for X-Rite ColorChecker in color calibration.

- The scan for updated sidecar files now ignores timestamp differences
  of two seconds or less.

- The macOS installation package now has a background image to direct
  the user on installing darktable.app.

- Changed the user interface of the import dialog to make it easier to
  delete custom places.

- Numerous rounds of code cleanup.

- The copy-parts dialog does not select any module by default now.

- Add support for undo/redo for actions done on the filmstrip while in
  darkroom.

- In darkroom, add action (binding to <kbd>Ctrl+x</kbd> by default) for
  synchronizing the last edited module on current edited module to the
  selection.

- Expose encoding speed control for AVIF export: trades off export
  time for file size and quality.

- Tag names can now easily be copied to the clipboard via popup
  context menu in the tagging module.

- The piwigo export storage now supports to specify a file name
  pattern for the exported file.

## Bug Fixes

- Fixed a performance regression for redrawing mipmaps.

- Fixed handling of old (2020) edits using Filmic RGB.

- Various OpenCL fixes to reduce differences between CPU and GPU
  processing: colorspace conversion, saturation gradient filter in
  color equalizer.

- Fixed gallery export not working on Windows.

- Fixed printer discovery in the print module, which could cause
  available printers to be missed.

- Work around out-of-spec ExIF date field caused by buggy software.

- Fixed reading embedded color profiles from PNG images.

- Fixed certain boundary cases in the crop module.

- Fixed crash when loading corrupted .gpx file in the geotagging module

- Fix preset handling in the export module not saving all parameters.

- Fix an issue in FilmicRGB where one of the parameter could be above
  the maximum allowed range making the validation failing and the
  whole set of parameters reset to default.

- Fix overlay recording to work in all cases (discarding history or
  copy/paste history for example) ensuring that an image not
  referenced anymore as overlay in a composite module can be removed.

- Properly reset darktable internal tag darktable|style|<name> and
  darktable|changed when resetting history.

- Fixed crash in the piwigo export storage when not logged in to the
  piwigo server.

- Fixed a bug in the export module where it was impossible to export a
  file again if "on conflict: overwrite if changed" was selected.

- Fixed a bug where double clicking on a label in darkroom modules
  does not reset the control.

## Lua

### API Version

- API version is now 9.3.0

### Bug Fixes

### Add action support for Lua

### Other Lua changes


## Notes

- When exporting to AVIF, EXR, JPEG XL, or XCF, selecting specific
  metadata (e.g. geo-tag or creator) is not currently possible. For
  AVIF, EXR, JPEG XL, and XCF formats, darktable will not include any
  metadata fields unless the user selects all of the checkboxes in the
  export module's preference options.

- Release 4.8 drops support for macOS versions older than 13.5.

## Changed Dependencies

### Mandatory

- Minimum libpng version 1.5.x is now required
- Bump Exiv2 requirement to 0.27.2
- Minimum pugixml version 1.5 is now required
- Minimum libcurl version 7.56 is now required
- Bump SQLite requirement to 3.26

### Optional

- n/a

## RawSpeed changes

- Fujifilm X-Trans 4 based and newer cameras now use the vendor supplied crop

## Camera support, compared to 4.6

### Base Support

- Canon EOS R100 (requires LibRaw 202403 and later)
- Canon EOS R50 (requires LibRaw 202403 and later)
- Canon EOS R6 Mark II (requires LibRaw 202403 and later)
- Canon EOS R8 (requires LibRaw 202403 and later)
- Canon EOS Ra (requires LibRaw 202403 and later)
- Fujifilm FinePix S9600fd
- Fujifilm X100VI (compressed)
- GoPro FUSION (DNG)
- Leica SL3 (DNG)
- OM System OM-1 Mark II
- Panasonic DC-TZ95D (4:3)
- Panasonic DMC-FX150 (4:3, 3:2, 16:9)
- Panasonic DMC-FZ28 (3:2)
- Phase One P25+
- Phase One P45+
- Ricoh GR III HDF (DNG)
- Ricoh GR IIIx HDF (DNG)
- Sony ILCE-9M3
- Sony UMC-R10C

### White Balance Presets

- Canon EOS R6 Mark II (requires LibRaw 202403 and later)
- Fujifilm X-H2
- OM System OM-1 Mark II
- OM System OM-5

### Noise Profiles

- Canon EOS R6 Mark II (requires LibRaw 202403 and later)
- Fujifilm GFX 50R
- OM System OM-1 Mark II
- OM System OM-5
- Phase One IQ180
- Sony ILCE-9M3
- Sony ZV-1

### Missing Compression Mode Support

- Apple ProRAW DNGs
- CinemaDNG lossless (Blackmagic, some DJI, etc.) and lossy (Blackmagic)
- DNG 1.7 using JPEG XL (Adobe enhanced, Samsung Expert RAW)
- Fujifilm lossy RAFs
- Nikon high efficiency NEFs
- OM System 14-bit high resolution ORFs
- Sony downsized lossless ARWs ("M" for full-frame, "S" for full-frame & APS-C)

### Suspended Support

Support for the following cameras is suspended because no samples are available on https://raw.pixls.us:

- Creo/Leaf Aptus 22(LF3779)/Hasselblad H1
- Fujifilm IS-1
- Kodak EasyShare Z980
- Leaf Aptus-II 5(LI300059)/Mamiya 645 AFD
- Leaf Credo 60
- Leaf Credo 80
- Minolta DiMAGE 5
- Olympus SP320
- Phase One IQ250
- Sinar Hy6/ Sinarback eXact
- ST Micro STV680

## Translations

- ???
